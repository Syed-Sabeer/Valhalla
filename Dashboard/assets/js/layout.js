var Layout=function(){var p="img/";var o="css/";var q=App.getResponsiveBreakpoint("md");var c=[];var b=[];var j=function(){var t=$(".page-content");var x=$(".sidemenu-container");var s=$("body");var w;if(s.hasClass("page-footer-fixed")===true&&s.hasClass("sidemenu-container-fixed")===false){var r=App.getViewPort().height-$(".page-footer").outerHeight()-$(".page-header").outerHeight();var y=x.outerHeight();if(y>r){r=y+$(".page-footer").outerHeight()}if(t.height()<r){t.attr("style","min-height:"+r+"px")}}else{if(s.hasClass("sidemenu-container-fixed")){w=a();if(s.hasClass("page-footer-fixed")===false){w=w-$(".page-footer").outerHeight()}}else{var v=$(".page-header").outerHeight();var u=$(".page-footer").outerHeight();if(App.getViewPort().width<q){w=App.getViewPort().height-v-u}else{w=x.height()+20}if((w+v+u)<=App.getViewPort().height){w=App.getViewPort().height-v-u}}t.attr("style","min-height:"+w+"px")}};var l=function(u,r){var w=location.hash.toLowerCase();var t=$(".sidemenu");if(u==="click"||u==="set"){r=$(r)}else{if(u==="match"){t.find("li > a").each(function(){var x=$(this).attr("href").toLowerCase();if(x.length>1&&w.substr(1,x.length-1)==x.substr(1)){r=$(this);return}})}}if(!r||r.length==0){return}if(r.attr("href").toLowerCase()==="javascript:;"||r.attr("href").toLowerCase()==="#"){return}var v=parseInt(t.data("slide-speed"),10);var s=t.data("keep-expanded");if(t.hasClass("sidemenu-hover-submenu")===false){t.find("li.nav-item.open").each(function(){var x=false;$(this).find("li").each(function(){if($(this).find(" > a").attr("href")===r.attr("href")){x=true;return}});if(x===true){return}$(this).removeClass("open");$(this).find("> a > .arrow.open").removeClass("open");$(this).find("> .sub-menu").slideUp()})}else{t.find("li.open").removeClass("open")}t.find("li.active").removeClass("active");t.find("li > a > .selected").remove();r.parents("li").each(function(){$(this).addClass("active");$(this).find("> a > span.arrow").addClass("open");if($(this).parent("ul.sidemenu").length===1){$(this).find("> a").append('<span class="selected"></span>')}if($(this).children("ul.sub-menu").length===1){$(this).addClass("open")}});if(u==="click"){if(App.getViewPort().width<q&&$(".sidemenu-container").hasClass("in")){$(".page-header .responsive-toggler").click()}}};var k=function(){$(".sidemenu").on("click","li > a.nav-toggle, li > a > span.nav-toggle",function(s){var A=$(this).closest(".nav-item").children(".nav-link");if(App.getViewPort().width>=q&&!$(".sidemenu").attr("data-initialized")&&$("body").hasClass("sidemenu-closed")&&A.parent("li").parent(".sidemenu").length===1){return}var t=A.next().hasClass("sub-menu");if(App.getViewPort().width>=q&&A.parents(".sidemenu-hover-submenu").length===1){return}if(t===false){if(App.getViewPort().width<q&&$(".sidemenu-container").hasClass("in")){$(".page-header .responsive-toggler").click()}return}var w=A.parent().parent();var B=A;var v=$(".sidemenu");var z=A.next();var r=v.data("auto-scroll");var y=parseInt(v.data("slide-speed"),10);var u=v.data("keep-expanded");if(!u){w.children("li.open").children("a").children(".arrow").removeClass("open");w.children("li.open").children(".sub-menu:not(.always-open)").slideUp(y);w.children("li.open").removeClass("open")}var x=-200;if(z.is(":visible")){$(".arrow",B).removeClass("open");B.parent().removeClass("open");z.slideUp(y,function(){if(r===true&&$("body").hasClass("sidemenu-closed")===false){if($("body").hasClass("sidemenu-container-fixed")){v.slimScroll({scrollTo:(B.position()).top})}else{App.scrollTo(B,x)}}j()})}else{if(t){$(".arrow",B).addClass("open");B.parent().addClass("open");z.slideDown(y,function(){if(r===true&&$("body").hasClass("sidemenu-closed")===false){if($("body").hasClass("sidemenu-container-fixed")){v.slimScroll({scrollTo:(B.position()).top})}else{App.scrollTo(B,x)}}j()})}}s.preventDefault()});$(document).on("click",".page-header-fixed-mobile .page-header .responsive-toggler",function(){App.scrollTop()});f();$(".sidemenu-container").on("click",".sidebar-search .remove",function(r){r.preventDefault();$(".sidebar-search").removeClass("open")});$(".sidemenu-container .sidebar-search").on("keypress","input.form-control",function(r){if(r.which==13){$(".sidebar-search").submit();return false}});$(".sidebar-search .submit").on("click",function(r){r.preventDefault();if($("body").hasClass("sidemenu-closed")){if($(".sidebar-search").hasClass("open")===false){if($(".sidemenu-container-fixed").length===1){$(".sidemenu-container .sidebar-toggler").click()}$(".sidebar-search").addClass("open")}else{$(".sidebar-search").submit()}}else{$(".sidebar-search").submit()}});if($(".sidebar-search").length!==0){$(".sidebar-search .input-group").on("click",function(r){r.stopPropagation()});$("body").on("click",function(){if($(".sidebar-search").hasClass("open")){$(".sidebar-search").removeClass("open")}})}};var a=function(){var r=App.getViewPort().height-$(".page-header").outerHeight(true);if($("body").hasClass("page-footer-fixed")){r=r-$(".page-footer").outerHeight()}return r};var e=function(){var r=$(".sidemenu");j();if($(".sidemenu-container-fixed").length===0){return}if(App.getViewPort().width>=q&&!$("body").hasClass("sidemenu-not-fixed")){r.attr("data-height",a());App.destroySlimScroll(r);App.initSlimScroll(r);j()}};var f=function(){var r=$("body");if(r.hasClass("sidemenu-container-fixed")){$(".sidemenu-container").on("mouseenter",function(){if(r.hasClass("sidemenu-closed")){$(this).find(".sidemenu").removeClass("sidemenu-closed")}}).on("mouseleave",function(){if(r.hasClass("sidemenu-closed")){$(this).find(".sidemenu").addClass("sidemenu-closed")}})}};var m=function(){var r=$("body");if($.cookie&&$.cookie("sidebar_closed")==="1"&&App.getViewPort().width>=q){$("body").addClass("sidemenu-closed");$(".sidemenu").addClass("sidemenu-closed")}$("body").on("click",".sidebar-toggler",function(s){var t=$(".sidemenu-container");var u=$(".sidemenu");$(".sidebar-search",t).removeClass("open");if(r.hasClass("sidemenu-closed")){r.removeClass("sidemenu-closed");u.removeClass("sidemenu-closed");if($.cookie){$.cookie("sidebar_closed","0")}}else{r.addClass("sidemenu-closed");u.addClass("sidemenu-closed");if(r.hasClass("sidemenu-container-fixed")){u.trigger("mouseleave")}if($.cookie){$.cookie("sidebar_closed","1")}}$(window).trigger("resize")})};var i=function(){$(".page-header").on("click",'.hor-menu a[data-toggle="tab"]',function(s){s.preventDefault();var t=$(".hor-menu .nav");var r=t.find("li.current");$("li.active",r).removeClass("active");$(".selected",r).remove();var u=$(this).parents("li").last();u.addClass("current");u.find("a:first").append('<span class="selected"></span>')});$(".page-header").on("click",".search-form",function(r){$(this).addClass("open");$(this).find(".form-control").focus();$(".page-header .search-form .form-control").on("blur",function(s){$(this).closest(".search-form").removeClass("open");$(this).unbind("blur")})});$(".page-header").on("keypress",".hor-menu .search-form .form-control",function(r){if(r.which==13){$(this).closest(".search-form").submit();return false}});$(".page-header").on("mousedown",".search-form.open .submit",function(r){r.preventDefault();r.stopPropagation();$(this).closest(".search-form").submit()});$(document).on("click",".mega-menu-dropdown .dropdown-menu",function(r){r.stopPropagation()})};var g=function(){function r(t){var u=t.cancelFullScreen||t.webkitCancelFullScreen||t.mozCancelFullScreen||t.exitFullscreen;if(u){u.call(t)}else{if(typeof window.ActiveXObject!=="undefined"){var v=new ActiveXObject("WScript.Shell");if(v!==null){v.SendKeys("{F11}")}}}}function s(t){var u=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;if(u){u.call(t)}else{if(typeof window.ActiveXObject!=="undefined"){var v=new ActiveXObject("WScript.Shell");if(v!==null){v.SendKeys("{F11}")}}}return false}$(document).on("click",".fullscreen-click",function(t){var u=document.body;var v=(document.fullScreenElement&&document.fullScreenElement!==null)||(document.mozFullScreen||document.webkitIsFullScreen);if(v){r(document)}else{s(u)}return false})};var n=function(){$("body").on("shown.bs.tab",'a[data-toggle="tab"]',function(){j()})};var h=function(){var s=300;var r=500;if(navigator.userAgent.match(/iPhone|iPad|iPod/i)){$(window).bind("touchend touchcancel touchleave",function(t){if($(this).scrollTop()>s){$(".scroll-to-top").fadeIn(r)}else{$(".scroll-to-top").fadeOut(r)}})}else{$(window).scroll(function(){if($(this).scrollTop()>s){$(".scroll-to-top").fadeIn(r)}else{$(".scroll-to-top").fadeOut(r)}})}$(document).on("click",".scroll-to-top",function(t){t.preventDefault();$("html, body").animate({scrollTop:0},r);return false})};var d=function(){$(".full-height-content").each(function(){var t=$(this);var r;r=App.getViewPort().height-$(".page-header").outerHeight(true)-$(".page-footer").outerHeight(true)-$(".page-title").outerHeight(true)-$(".page-bar").outerHeight(true);if(t.hasClass("portlet")){var s=t.find(".portlet-body");App.destroySlimScroll(s.find(".full-height-content-body"));r=r-t.find(".portlet-title").outerHeight(true)-parseInt(t.find(".portlet-body").css("padding-top"),10)-parseInt(t.find(".portlet-body").css("padding-bottom"),10)-5;if(App.getViewPort().width>=q&&t.hasClass("full-height-content-scrollable")){r=r-35;s.find(".full-height-content-body").css("height",r);App.initSlimScroll(s.find(".full-height-content-body"))}else{s.css("min-height",r)}}else{App.destroySlimScroll(t.find(".full-height-content-body"));if(App.getViewPort().width>=q&&t.hasClass("full-height-content-scrollable")){r=r-35;t.find(".full-height-content-body").css("height",r);App.initSlimScroll(t.find(".full-height-content-body"))}else{t.css("min-height",r)}}})};return{initHeader:function(){i();g()},setSidebarMenuActiveLink:function(s,r){l(s,r)},initSidebar:function(){e();k();m();App.addResizeHandler(e)},initContent:function(){d();n();App.addResizeHandler(j);App.addResizeHandler(d)},initFooter:function(){h()},init:function(){this.initHeader();this.initSidebar();this.initContent();this.initFooter()},loadAjaxContent:function(t,s){var r=$(".page-content .page-content-body");App.startPageLoading({animate:true});$.ajax({type:"GET",cache:false,url:t,dataType:"html",success:function(v){App.stopPageLoading();for(var u=0;u<c.length;u++){c[u].call(v)}if(s.length>0&&s.parents("li.open").length===0){$(".sidemenu > li.open > a").click()}r.html(v);Layout.fixContentHeight();App.initAjax()},error:function(w,u,x){App.stopPageLoading();r.html("<h4>Could not load the requested content.</h4>");for(var v=0;v<b.length;v++){c[v].call(w)}}})},addAjaxContentSuccessCallback:function(r){c.push(r)},addAjaxContentErrorCallback:function(r){b.push(r)},fixContentHeight:function(){j()},initFixedSidebarHoverEffect:function(){f()},initFixedSidebar:function(){e()},getLayoutImgPath:function(){return App.getAssetsPath()+p},getLayoutCssPath:function(){return App.getAssetsPath()+o}}}();jQuery(document).ready(function(){Layout.init()});