(function(a,h,c,g){var e="treeview";var b={};b.settings={injectStyle:true,levels:2,expandIcon:"fa fa-plus",collapseIcon:"fa fa-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"fa fa-check",uncheckedIcon:"fa fa-unchecked",color:g,backColor:g,borderColor:g,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:g,enableLinks:false,highlightSelected:true,highlightSearchResults:true,showBorder:true,showIcon:true,showCheckbox:false,showTags:false,multiSelect:false,onNodeChecked:g,onNodeCollapsed:g,onNodeDisabled:g,onNodeEnabled:g,onNodeExpanded:g,onNodeSelected:g,onNodeUnchecked:g,onNodeUnselected:g,onSearchComplete:g,onSearchCleared:g};b.options={silent:false,ignoreChildren:false};b.searchOptions={ignoreCase:true,exactMatch:false,revealResults:true};var f=function(i,j){this.$element=a(i);this.elementId=i.id;this.styleId=this.elementId+"-style";this.init(j);return{options:this.options,init:a.proxy(this.init,this),remove:a.proxy(this.remove,this),getNode:a.proxy(this.getNode,this),getParent:a.proxy(this.getParent,this),getSiblings:a.proxy(this.getSiblings,this),getSelected:a.proxy(this.getSelected,this),getUnselected:a.proxy(this.getUnselected,this),getExpanded:a.proxy(this.getExpanded,this),getCollapsed:a.proxy(this.getCollapsed,this),getChecked:a.proxy(this.getChecked,this),getUnchecked:a.proxy(this.getUnchecked,this),getDisabled:a.proxy(this.getDisabled,this),getEnabled:a.proxy(this.getEnabled,this),selectNode:a.proxy(this.selectNode,this),unselectNode:a.proxy(this.unselectNode,this),toggleNodeSelected:a.proxy(this.toggleNodeSelected,this),collapseAll:a.proxy(this.collapseAll,this),collapseNode:a.proxy(this.collapseNode,this),expandAll:a.proxy(this.expandAll,this),expandNode:a.proxy(this.expandNode,this),toggleNodeExpanded:a.proxy(this.toggleNodeExpanded,this),revealNode:a.proxy(this.revealNode,this),checkAll:a.proxy(this.checkAll,this),checkNode:a.proxy(this.checkNode,this),uncheckAll:a.proxy(this.uncheckAll,this),uncheckNode:a.proxy(this.uncheckNode,this),toggleNodeChecked:a.proxy(this.toggleNodeChecked,this),disableAll:a.proxy(this.disableAll,this),disableNode:a.proxy(this.disableNode,this),enableAll:a.proxy(this.enableAll,this),enableNode:a.proxy(this.enableNode,this),toggleNodeDisabled:a.proxy(this.toggleNodeDisabled,this),search:a.proxy(this.search,this),clearSearch:a.proxy(this.clearSearch,this)}};f.prototype.init=function(i){this.tree=[];this.nodes=[];if(i.data){if(typeof i.data==="string"){i.data=a.parseJSON(i.data)}this.tree=a.extend(true,[],i.data);delete i.data}this.options=a.extend({},b.settings,i);this.destroy();this.subscribeEvents();this.setInitialStates({nodes:this.tree},0);this.render()};f.prototype.remove=function(){this.destroy();a.removeData(this,e);a("#"+this.styleId).remove()};f.prototype.destroy=function(){if(!this.initialized){return}this.$wrapper.remove();this.$wrapper=null;this.unsubscribeEvents();this.initialized=false};f.prototype.unsubscribeEvents=function(){this.$element.off("click");this.$element.off("nodeChecked");this.$element.off("nodeCollapsed");this.$element.off("nodeDisabled");this.$element.off("nodeEnabled");this.$element.off("nodeExpanded");this.$element.off("nodeSelected");this.$element.off("nodeUnchecked");this.$element.off("nodeUnselected");this.$element.off("searchComplete");this.$element.off("searchCleared")};f.prototype.subscribeEvents=function(){this.unsubscribeEvents();this.$element.on("click",a.proxy(this.clickHandler,this));if(typeof(this.options.onNodeChecked)==="function"){this.$element.on("nodeChecked",this.options.onNodeChecked)}if(typeof(this.options.onNodeCollapsed)==="function"){this.$element.on("nodeCollapsed",this.options.onNodeCollapsed)}if(typeof(this.options.onNodeDisabled)==="function"){this.$element.on("nodeDisabled",this.options.onNodeDisabled)}if(typeof(this.options.onNodeEnabled)==="function"){this.$element.on("nodeEnabled",this.options.onNodeEnabled)}if(typeof(this.options.onNodeExpanded)==="function"){this.$element.on("nodeExpanded",this.options.onNodeExpanded)}if(typeof(this.options.onNodeSelected)==="function"){this.$element.on("nodeSelected",this.options.onNodeSelected)}if(typeof(this.options.onNodeUnchecked)==="function"){this.$element.on("nodeUnchecked",this.options.onNodeUnchecked)}if(typeof(this.options.onNodeUnselected)==="function"){this.$element.on("nodeUnselected",this.options.onNodeUnselected)}if(typeof(this.options.onSearchComplete)==="function"){this.$element.on("searchComplete",this.options.onSearchComplete)}if(typeof(this.options.onSearchCleared)==="function"){this.$element.on("searchCleared",this.options.onSearchCleared)}};f.prototype.setInitialStates=function(l,k){if(!l.nodes){return}k+=1;var m=l;var i=this;a.each(l.nodes,function j(n,o){o.nodeId=i.nodes.length;o.parentId=m.nodeId;if(!o.hasOwnProperty("selectable")){o.selectable=true}o.state=o.state||{};if(!o.state.hasOwnProperty("checked")){o.state.checked=false}if(!o.state.hasOwnProperty("disabled")){o.state.disabled=false}if(!o.state.hasOwnProperty("expanded")){if(!o.state.disabled&&(k<i.options.levels)&&(o.nodes&&o.nodes.length>0)){o.state.expanded=true}else{o.state.expanded=false}}if(!o.state.hasOwnProperty("selected")){o.state.selected=false}i.nodes.push(o);if(o.nodes){i.setInitialStates(o,k)}})};f.prototype.clickHandler=function(j){if(!this.options.enableLinks){j.preventDefault()}var l=a(j.target);var k=this.findNode(l);if(!k||k.state.disabled){return}var i=l.attr("class")?l.attr("class").split(" "):[];if((i.indexOf("expand-icon")!==-1)){this.toggleExpandedState(k,b.options);this.render()}else{if((i.indexOf("check-icon")!==-1)){this.toggleCheckedState(k,b.options);this.render()}else{if(k.selectable){this.toggleSelectedState(k,b.options)}else{this.toggleExpandedState(k,b.options)}this.render()}}};f.prototype.findNode=function(k){var j=k.closest("li.list-group-item").attr("data-nodeid");var i=this.nodes[j];if(!i){console.log("Error: node does not exist")}return i};f.prototype.toggleExpandedState=function(i,j){if(!i){return}this.setExpandedState(i,!i.state.expanded,j)};f.prototype.setExpandedState=function(i,k,j){if(k===i.state.expanded){return}if(k&&i.nodes){i.state.expanded=true;if(!j.silent){this.$element.trigger("nodeExpanded",a.extend(true,{},i))}}else{if(!k){i.state.expanded=false;if(!j.silent){this.$element.trigger("nodeCollapsed",a.extend(true,{},i))}if(i.nodes&&!j.ignoreChildren){a.each(i.nodes,a.proxy(function(l,m){this.setExpandedState(m,false,j)},this))}}}};f.prototype.toggleSelectedState=function(i,j){if(!i){return}this.setSelectedState(i,!i.state.selected,j)};f.prototype.setSelectedState=function(i,k,j){if(k===i.state.selected){return}if(k){if(!this.options.multiSelect){a.each(this.findNodes("true","g","state.selected"),a.proxy(function(l,m){this.setSelectedState(m,false,j)},this))}i.state.selected=true;if(!j.silent){this.$element.trigger("nodeSelected",a.extend(true,{},i))}}else{i.state.selected=false;if(!j.silent){this.$element.trigger("nodeUnselected",a.extend(true,{},i))}}};f.prototype.toggleCheckedState=function(i,j){if(!i){return}this.setCheckedState(i,!i.state.checked,j)};f.prototype.setCheckedState=function(i,k,j){if(k===i.state.checked){return}if(k){i.state.checked=true;if(!j.silent){this.$element.trigger("nodeChecked",a.extend(true,{},i))}}else{i.state.checked=false;if(!j.silent){this.$element.trigger("nodeUnchecked",a.extend(true,{},i))}}};f.prototype.setDisabledState=function(i,k,j){if(k===i.state.disabled){return}if(k){i.state.disabled=true;this.setExpandedState(i,false,j);this.setSelectedState(i,false,j);this.setCheckedState(i,false,j);if(!j.silent){this.$element.trigger("nodeDisabled",a.extend(true,{},i))}}else{i.state.disabled=false;if(!j.silent){this.$element.trigger("nodeEnabled",a.extend(true,{},i))}}};f.prototype.render=function(){if(!this.initialized){this.$element.addClass(e);this.$wrapper=a(this.template.list);this.injectStyle();this.initialized=true}this.$element.empty().append(this.$wrapper.empty());this.buildTree(this.tree,0)};f.prototype.buildTree=function(l,k){if(!l){return}k+=1;var i=this;a.each(l,function j(p,q){var r=a(i.template.item).addClass("node-"+i.elementId).addClass(q.state.checked?"node-checked":"").addClass(q.state.disabled?"node-disabled":"").addClass(q.state.selected?"node-selected":"").addClass(q.searchResult?"search-result":"").attr("data-nodeid",q.nodeId).attr("style",i.buildStyleOverride(q));for(var o=0;o<(k-1);o++){r.append(i.template.indent)}var n=[];if(q.nodes){n.push("expand-icon");if(q.state.expanded){n.push(i.options.collapseIcon)}else{n.push(i.options.expandIcon)}}else{n.push(i.options.emptyIcon)}r.append(a(i.template.icon).addClass(n.join(" ")));if(i.options.showIcon){var n=["node-icon"];n.push(q.icon||i.options.nodeIcon);if(q.state.selected){n.pop();n.push(q.selectedIcon||i.options.selectedIcon||q.icon||i.options.nodeIcon)}r.append(a(i.template.icon).addClass(n.join(" ")))}if(i.options.showCheckbox){var n=["check-icon"];if(q.state.checked){n.push(i.options.checkedIcon)}else{n.push(i.options.uncheckedIcon)}r.append(a(i.template.icon).addClass(n.join(" ")))}if(i.options.enableLinks){r.append(a(i.template.link).attr("href",q.href).append(q.text))}else{r.append(q.text)}if(i.options.showTags&&q.tags){a.each(q.tags,function m(s,t){r.append(a(i.template.badge).append(t))})}i.$wrapper.append(r);if(q.nodes&&q.state.expanded&&!q.state.disabled){return i.buildTree(q.nodes,k)}})};f.prototype.buildStyleOverride=function(k){if(k.state.disabled){return""}var j=k.color;var i=k.backColor;if(this.options.highlightSelected&&k.state.selected){if(this.options.selectedColor){j=this.options.selectedColor}if(this.options.selectedBackColor){i=this.options.selectedBackColor}}if(this.options.highlightSearchResults&&k.searchResult&&!k.state.disabled){if(this.options.searchResultColor){j=this.options.searchResultColor}if(this.options.searchResultBackColor){i=this.options.searchResultBackColor}}return"color:"+j+";background-color:"+i+";"};f.prototype.injectStyle=function(){if(this.options.injectStyle&&!c.getElementById(this.styleId)){a('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")}};f.prototype.buildStyle=function(){var i=".node-"+this.elementId+"{";if(this.options.color){i+="color:"+this.options.color+";"}if(this.options.backColor){i+="background-color:"+this.options.backColor+";"}if(!this.options.showBorder){i+="border:none;"}else{if(this.options.borderColor){i+="border:1px solid "+this.options.borderColor+";"}}i+="}";if(this.options.onhoverColor){i+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"}return this.css+i};f.prototype.template={list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'};f.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}";f.prototype.getNode=function(i){return this.nodes[i]};f.prototype.getParent=function(i){var j=this.identifyNode(i);return this.nodes[j.parentId]};f.prototype.getSiblings=function(i){var j=this.identifyNode(i);var l=this.getParent(j);var k=l?l.nodes:this.tree;return k.filter(function(m){return m.nodeId!==j.nodeId})};f.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")};f.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")};f.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")};f.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")};f.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")};f.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")};f.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")};f.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")};f.prototype.selectNode=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setSelectedState(k,true,l)},this));this.render()};f.prototype.unselectNode=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setSelectedState(k,false,l)},this));this.render()};f.prototype.toggleNodeSelected=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){this.toggleSelectedState(k,l)},this));this.render()};f.prototype.collapseAll=function(j){var i=this.findNodes("true","g","state.expanded");this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setExpandedState(k,false,l)},this));this.render()};f.prototype.collapseNode=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setExpandedState(k,false,l)},this));this.render()};f.prototype.expandAll=function(j){j=a.extend({},b.options,j);if(j&&j.levels){this.expandLevels(this.tree,j.levels,j)}else{var i=this.findNodes("false","g","state.expanded");this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setExpandedState(k,true,l)},this))}this.render()};f.prototype.expandNode=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setExpandedState(k,true,l);if(k.nodes&&(l&&l.levels)){this.expandLevels(k.nodes,l.levels-1,l)}},this));this.render()};f.prototype.expandLevels=function(j,i,k){k=a.extend({},b.options,k);a.each(j,a.proxy(function(l,m){this.setExpandedState(m,(i>0)?true:false,k);if(m.nodes){this.expandLevels(m.nodes,i-1,k)}},this))};f.prototype.revealNode=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){var m=this.getParent(k);while(m){this.setExpandedState(m,true,l);m=this.getParent(m)}},this));this.render()};f.prototype.toggleNodeExpanded=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){this.toggleExpandedState(k,l)},this));this.render()};f.prototype.checkAll=function(j){var i=this.findNodes("false","g","state.checked");this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setCheckedState(k,true,l)},this));this.render()};f.prototype.checkNode=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setCheckedState(k,true,l)},this));this.render()};f.prototype.uncheckAll=function(j){var i=this.findNodes("true","g","state.checked");this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setCheckedState(k,false,l)},this));this.render()};f.prototype.uncheckNode=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setCheckedState(k,false,l)},this));this.render()};f.prototype.toggleNodeChecked=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){this.toggleCheckedState(k,l)},this));this.render()};f.prototype.disableAll=function(j){var i=this.findNodes("false","g","state.disabled");this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setDisabledState(k,true,l)},this));this.render()};f.prototype.disableNode=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setDisabledState(k,true,l)},this));this.render()};f.prototype.enableAll=function(j){var i=this.findNodes("true","g","state.disabled");this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setDisabledState(k,false,l)},this));this.render()};f.prototype.enableNode=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setDisabledState(k,false,l)},this));this.render()};f.prototype.toggleNodeDisabled=function(i,j){this.forEachIdentifier(i,j,a.proxy(function(k,l){this.setDisabledState(k,!k.state.disabled,l)},this));this.render()};f.prototype.forEachIdentifier=function(j,k,i){k=a.extend({},b.options,k);if(!(j instanceof Array)){j=[j]}a.each(j,a.proxy(function(m,l){i(this.identifyNode(l),k)},this))};f.prototype.identifyNode=function(i){return((typeof i)==="number")?this.nodes[i]:i};f.prototype.search=function(k,j){j=a.extend({},b.searchOptions,j);this.clearSearch({render:false});var l=[];if(k&&k.length>0){if(j.exactMatch){k="^"+k+"$"}var i="g";if(j.ignoreCase){i+="i"}l=this.findNodes(k,i);a.each(l,function(m,n){n.searchResult=true})}if(j.revealResults){this.revealNode(l)}else{this.render()}this.$element.trigger("searchComplete",a.extend(true,{},l));return l};f.prototype.clearSearch=function(i){i=a.extend({},{render:true},i);var j=a.each(this.findNodes("true","g","searchResult"),function(k,l){l.searchResult=false});if(i.render){this.render()}this.$element.trigger("searchCleared",a.extend(true,{},j))};f.prototype.findNodes=function(l,k,j){k=k||"g";j=j||"text";var i=this;return a.grep(this.nodes,function(m){var n=i.getNodeValue(m,j);if(typeof n==="string"){return n.match(new RegExp(l,k))}})};f.prototype.getNodeValue=function(m,k){var l=k.indexOf(".");if(l>0){var j=m[k.substring(0,l)];var i=k.substring(l+1,k.length);return this.getNodeValue(j,i)}else{if(m.hasOwnProperty(k)){return m[k].toString()}else{return g}}};var d=function(i){if(h.console){h.console.error(i)}};a.fn[e]=function(j,i){var k;this.each(function(){var l=a.data(this,e);if(typeof j==="string"){if(!l){d("Not initialized, can not call method : "+j)}else{if(!a.isFunction(l[j])||j.charAt(0)==="_"){d("No such method : "+j)}else{if(!(i instanceof Array)){i=[i]}k=l[j].apply(l,i)}}}else{if(typeof j==="boolean"){k=l}else{a.data(this,e,new f(this,a.extend(true,{},j)))}}});return k||this}})(jQuery,window,document);